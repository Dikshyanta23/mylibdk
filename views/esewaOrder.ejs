<form
  id="form"
  action="https://rc-epay.esewa.com.np/api/epay/main/v2/form"
  method="POST"
>
  <input type="hidden" id="tax_amount" name="tax_amount" value="10" required />
  <input
    type="hidden"
    id="amount"
    name="amount"
    value="<%= book.price %>"
    required
  />

  <input
    type="hidden"
    id="total_amount"
    name="total_amount"
    value="<%= book.price + 10 %>"
    required
  />
  <input
    type="hidden"
    id="transaction_uuid"
    name="transaction_uuid"
    value="<%= book.id %>"
    required
  />
  <input
    type="hidden"
    id="product_code"
    name="product_code"
    value="EPAYTEST"
    required
  />
  <input
    type="hidden"
    id="product_service_charge"
    name="product_service_charge"
    value="0"
    required
  />
  <input
    type="hidden"
    id="product_delivery_charge"
    name="product_delivery_charge"
    value="0"
    required
  />
  <input
    type="hidden"
    id="success_url"
    name="success_url"
    value="http://localhost:5000/dashboard/esewa/verify/<%= book.id %>"
    required
  />
  <input
    type="hidden"
    id="failure_url"
    name="failure_url"
    value="http://localhost:5000/dashboard/allbooks"
    required
  />
  <input
    type="hidden"
    id="signed_field_names"
    name="signed_field_names"
    value="total_amount,transaction_uuid,product_code"
    required
  />
  <input
    type="hidden"
    id="signature"
    name="signature"
    value="<%= hash %>"
    required
  />
  <input type="submit" />
</form>
<button id="btn" onclick="submitForm(event)">Submit</button>
<script>
  function submitForm(event) {
    event.preventDefault();
    const form = document.getElementById("form");
    const formData = new FormData(form);
    const url = "https://rc-epay.esewa.com.np/api/epay/main/v2/form";
    fetch(url, {
      method: "POST",
      body: formData,
    })
      .then((response) => response.json())
      .then((data) => {
        console.log(data);
      });
  }
</script>
